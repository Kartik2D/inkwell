<!--
  Entry Point - HTML Structure
  
  Defines three canvas elements stacked with z-index layering:
  - UI Canvas (z-index: 3): Receives ALL input events, displays cursor/overlays
  - Pixel Canvas (z-index: 2): Low-resolution pixel drawing (temporary, cleared after tracing)
  - Paper Canvas (z-index: 1): Final vector paths rendered with Paper.js
  
  All canvases are full viewport size, absolutely positioned and stacked.
  The pixel canvas uses CSS image-rendering: pixelated for crisp low-res display.
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Inkwell - Pixel to Vector Drawing</title>
  <style>
    *, *::before, *::after {
      margin: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #f5f5f5;
      touch-action: none;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }

    #canvas-container {
      position: relative;
      width: 100%;
      height: 100%;
      touch-action: none;
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      touch-action: none;
    }

    #paper-canvas {
      z-index: 1;
      background: white;
    }

    #pixel-canvas {
      z-index: 2;
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }

    #ui-canvas {
      z-index: 3;
      pointer-events: auto;
      cursor: crosshair;
      mix-blend-mode: exclusion;
    }

    /* Mobile toggle button for control panel */
    #panel-toggle {
      display: none;
      position: fixed;
      top: 16px;
      right: 16px;
      width: 44px;
      height: 44px;
      background: white;
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 1001;
      cursor: pointer;
      font-size: 20px;
      align-items: center;
      justify-content: center;
    }

    @media (max-width: 600px) {
      #panel-toggle {
        display: flex;
      }
    }
  </style>
</head>
<body>
  <div id="canvas-container">
    <canvas id="paper-canvas"></canvas>
    <canvas id="pixel-canvas"></canvas>
    <canvas id="ui-canvas"></canvas>
  </div>
  <inkwell-control-panel id="control-panel"></inkwell-control-panel>
  <button id="panel-toggle" aria-label="Toggle controls">⚙️</button>
  <script type="module" src="/src/app.ts"></script>
  <script>
    // Mobile panel toggle
    const toggle = document.getElementById('panel-toggle');
    toggle.addEventListener('click', () => {
      const panel = document.getElementById('control-panel');
      if (panel) {
        panel.classList.toggle('open');
        toggle.textContent = panel.classList.contains('open') ? '✕' : '⚙️';
      }
    });
  </script>
</body>
</html>
